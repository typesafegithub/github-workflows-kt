
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Piotr KrzemiÅ„ski">
      
      
      
        <link rel="prev" href="../getting_started/">
      
      
        <link rel="next" href="../type-safe-expressions/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Using actions - github-workflows-kt</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-actions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="github-workflows-kt" class="md-header__button md-logo" aria-label="github-workflows-kt" data-md-component="logo">
      
  <img src="../../Logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            github-workflows-kt
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Using actions
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/typesafegithub/github-workflows-kt/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="github-workflows-kt" class="md-nav__button md-logo" aria-label="github-workflows-kt" data-md-component="logo">
      
  <img src="../../Logo.svg" alt="logo">

    </a>
    github-workflows-kt
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/typesafegithub/github-workflows-kt/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Using actions
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Using actions
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#maven-compatible-action-bindings-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Maven-compatible action bindings repository
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-defined-actions" class="md-nav__link">
    <span class="md-ellipsis">
      User-defined actions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="User-defined actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typed-binding" class="md-nav__link">
    <span class="md-ellipsis">
      Typed binding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Typed binding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repository-based-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Repository based actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Local actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#published-docker-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Published Docker actions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#untyped-binding" class="md-nav__link">
    <span class="md-ellipsis">
      Untyped binding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Untyped binding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repository-based-actions_1" class="md-nav__link">
    <span class="md-ellipsis">
      Repository based actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-actions_1" class="md-nav__link">
    <span class="md-ellipsis">
      Local actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#published-docker-actions_1" class="md-nav__link">
    <span class="md-ellipsis">
      Published Docker actions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type-safe-expressions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Type-safe expressions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../job-outputs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job outputs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrating-to-Maven-based-bindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrating to Maven-based bindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compensating-librarys-missing-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compensating library's missing features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nightly-builds/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nightly builds
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../feature-coverage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature coverage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://typesafegithub.github.io/github-workflows-kt/api-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API docs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../projects-using-this-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Projects using this library
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#maven-compatible-action-bindings-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Maven-compatible action bindings repository
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-defined-actions" class="md-nav__link">
    <span class="md-ellipsis">
      User-defined actions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="User-defined actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#typed-binding" class="md-nav__link">
    <span class="md-ellipsis">
      Typed binding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Typed binding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repository-based-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Repository based actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Local actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#published-docker-actions" class="md-nav__link">
    <span class="md-ellipsis">
      Published Docker actions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#untyped-binding" class="md-nav__link">
    <span class="md-ellipsis">
      Untyped binding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Untyped binding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repository-based-actions_1" class="md-nav__link">
    <span class="md-ellipsis">
      Repository based actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-actions_1" class="md-nav__link">
    <span class="md-ellipsis">
      Local actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#published-docker-actions_1" class="md-nav__link">
    <span class="md-ellipsis">
      Published Docker actions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div><h1 id="using-actions">Using actions</h1>
<p>As a reminder, to be able to use an action, you have to know its owner, name and version, e.g. <code>actions/checkout@v3</code>.
You can use any action you want. Read on to learn about your options.</p>
<h2 id="maven-compatible-action-bindings-repository">Maven-compatible action bindings repository</h2>
<div class="admonition info">
<p class="admonition-title">When to use this approach</p>
<p>This is the recommended, default approach. Start with this.</p>
</div>
<p>To add a dependency on an action:</p>
<ol>
<li>
<p>If you haven't already, add a dependency on a Maven repository that generates the action bindings on the fly:
   <code>@file:Repository("https://bindings.krzeminski.it")</code>.</p>
</li>
<li>
<p>Add a dependency on a Maven artifact, e.g. for <code>actions/checkout@v3</code> the right way to add the dependency in the
   script is: <code>@file:DependsOn("actions:checkout:v3")</code>. As you can see, the group ID was adopted to model the action's
   owner, the artifact ID models the action name, and the version is just action's version (a tag or a branch
   corresponding to a released version). If an action's manifest is defined in a subdirectory, like the popular
   <code>gradle/actions/setup-gradle@v3</code>, replace the slashes in the action name with <code>__</code>, so in this case it would be
   <code>@file:DependsOn("gradle:actions__setup-gradle:v3")</code>.</p>
<details class="tip">
<summary>Dealing with stale Maven cache, a.k.a. using version ranges</summary>
<p>Additionally, the name part can have the suffix <code>___major</code> or <code>___minor</code> (three leading underscores).
Without these suffixes if you request a version <code>v1.2.3</code>, the generated YAML will also use exactly
<code>v1.2.3</code> unless you use a custom version override. With the <code>___major</code> suffix, it would only write <code>v1</code>
to the generated YAML, with the <code>___minor</code> suffix - <code>v1.2</code>.</p>
<p>This is especially useful when combined with a version range. The problem with using <code>v1</code> or <code>v1.2</code> is that for
GitHub Actions, these are changing tags or changing branches and not static releases. In the Maven world,
however, a version that does not end with <code>-SNAPSHOT</code> is considered immutable and is not expected to change.
This means that if a new version of the action is released that adds a new input, you cannot use it easily
as you still have the old <code>v1</code> artifact in your Maven cache and it will not be updated usually,
even though the binding server provides a new binding including the added input. And even if you remove the
old version from the Maven cache and get a new version from the bindings server, other people might also have
this outdated version in their Maven cache and then fail compilation with your changes.
It's worth emphasizing that this problem is currently present only when iterating
on your workflows locally. When running on GitHub Actions, this problem doesn't
exist because the state of Maven Local repo isn't cached between the runs.</p>
<p>To mitigate this problem, you can for example use a dependency like
<code>gradle:actions__setup-gradle___major:[v3,v4)</code> (from <code>v3</code> inclusive to <code>v4</code> exclusive).
This will resolve to the latest <code>v3.x.y</code> version and thus include any newly added inputs,
but still only write <code>v3</code> to the YAML. Without the <code>___major</code> suffix or a not semantically matching
range like <code>[v3,v5)</code> or even <code>[v3,v4]</code>, you will get problems with the consistency check as
then the YAML output changes as soon as a new version is released. For a minor version
you would accordingly use the <code>___minor</code> suffix together with a range like <code>[v4.0,v4.1)</code> to get
the latest <code>v4.0</code> release if the action in question provides such a tag or branch.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If an action maintainer provides pre-releases that follow certain naming conventions as documented in the
<a href="https://maven.apache.org/pom.html#Version_Order_Specification">Maven Documentation</a>, you might need to
adjust the upper bound. For exmple a version <code>v4.0-beta</code> is less than <code>v4</code> and thus part of the range
<code>[v3,v4)</code>. In such a case - or always, to be on the safe side - you might want to change the range to
<code>[v3,v4-alpha)</code>, as the <code>alpha</code> version is the lowest possible version in Maven semantics.</p>
</div>
</details>
</li>
<li>
<p>Use the action by importing a class like <code>io.github.typesafegithub.workflows.actions.actions.Checkout</code>.</p>
</li>
</ol>
<p>For every action, a binding will be generated. However, some less popular actions don't have typings configured for
their inputs, so by default all inputs are of type <code>String</code>, have the suffix <code>_Untyped</code>, and additionally the class
name will have an <code>_Untyped</code> suffix. The nullability of the inputs will be according to their required status.</p>
<p>There are two ways of configuring typings:</p>
<ol>
<li>
<p>Recommended: a typing manifest (<code>action-typing.yml</code>) in the action's repo, see
   <a href="https://github.com/typesafegithub/github-actions-typing/">github-actions-typing</a>. Thanks to this, the action's owner
   is responsible for providing and maintaining the typings defined in a technology-agnostic way, to be used
   <strong>not only</strong> with this Kotlin library. There are also no synchronization issues between the action itself and its
   typings. When trying to use a new action that has no typings, always discuss this approach with the action owner
   first.</p>
</li>
<li>
<p>Fallback: if it's not possible to host the typings with the action, use
   <a href="https://github.com/typesafegithub/github-actions-typing-catalog">github-actions-typing-catalog</a>,
   a community-maintained place to host the typings. You can contribute or fix typings for your favorite action by
   sending a PR.</p>
</li>
</ol>
<p>Once there are any typings in place for the action, the <code>_Untyped</code> suffixed class is marked <code>@Deprecated</code>, and a class
without that suffix is created additionally. In that class for each input that does not have type information available
there will still be only the property with <code>_Untyped</code> suffix and nullability according to required status. For each
input that does have type information available, there will still be the <code>_Untyped</code> property and additionally a
properly typed property. Both of these properties will be nullable. It is a runtime error to set both of these
properties as well as setting none if the input is required. The <code>_Untyped</code> properties are not marked <code>@Deprecated</code>,
as it could still make sense to use them, for example if you want to set the value from a GitHub Actions expression.</p>
<p>This approach supports dependency updating bots that support Kotlin Script's <code>.main.kts</code> files. E.g. Renovate is known
to support it.</p>
<h2 id="user-defined-actions">User-defined actions</h2>
<p>If you are in a hurry and adding typings is not possible right now, browse these options.</p>
<h3 id="typed-binding">Typed binding</h3>
<div class="admonition info">
<p class="admonition-title">When to use this approach</p>
<p>It lets you create an action binding in a similar manner that is provided by the action bindings server i.e. a class
that takes some constructor arguments with types of your choice, and maps them to strings inside <code>toYamlArguments</code>.
Use it to have better type-safety when using the binding.</p>
</div>
<h4 id="repository-based-actions">Repository based actions</h4>
<p>In case of a repository based action which most GitHub actions are, inherit from <a href="https://github.com/typesafegithub/github-workflows-kt/blob/main/github-workflows-kt/src/main/kotlin/io/github/typesafegithub/workflows/domain/actions/RegularAction.kt"><code>RegularAction</code></a>
and in case of actions without explicit outputs, use the <code>Actions.Outputs</code> class as type argument:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MyCoolActionV3</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">someArgument</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">RegularAction</span><span class="o">&lt;</span><span class="n">Action</span><span class="p">.</span><span class="na">Outputs</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"acmecorp"</span><span class="p">,</span><span class="w"> </span><span class="s">"cool-action"</span><span class="p">,</span><span class="w"> </span><span class="s">"v3"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">toYamlArguments</span><span class="p">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">linkedMapOf</span><span class="p">(</span>
<span class="w">            </span><span class="s">"some-argument"</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">someArgument</span><span class="p">,</span>
<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">buildOutputObject</span><span class="p">(</span><span class="n">stepId</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Outputs</span><span class="p">(</span><span class="n">stepId</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>or, in case of actions with explicit outputs, create a subclass of <code>Action.Outputs</code> for the type argument:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MyCoolActionV3</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">someArgument</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">RegularAction</span><span class="o">&lt;</span><span class="n">MyCoolActionV3</span><span class="p">.</span><span class="na">Outputs</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"acmecorp"</span><span class="p">,</span><span class="w"> </span><span class="s">"cool-action"</span><span class="p">,</span><span class="w"> </span><span class="s">"v3"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">toYamlArguments</span><span class="p">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">linkedMapOf</span><span class="p">(</span>
<span class="w">            </span><span class="s">"some-argument"</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">someArgument</span><span class="p">,</span>
<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">buildOutputObject</span><span class="p">(</span><span class="n">stepId</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Outputs</span><span class="p">(</span><span class="n">stepId</span><span class="p">)</span>

<span class="w">    </span><span class="kd">class</span><span class="w"> </span><span class="nc">Outputs</span><span class="p">(</span>
<span class="w">        </span><span class="n">stepId</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Action</span><span class="p">.</span><span class="na">Outputs</span><span class="p">(</span><span class="n">stepId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">coolOutput</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"steps.</span><span class="si">$</span><span class="n">stepId</span><span class="s">.outputs.coolOutput"</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Once you've got your action, it's now as simple as using it like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">uses</span><span class="p">(</span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"FooBar"</span><span class="p">,</span>
<span class="w">    </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyCoolActionV3</span><span class="p">(</span><span class="n">someArgument</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"foobar"</span><span class="p">),</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="local-actions">Local actions</h4>
<p>In case of a local action you have available in your repository or cloned from a private repository,
inherit from <a href="https://github.com/typesafegithub/github-workflows-kt/blob/main/github-workflows-kt/src/main/kotlin/io/github/typesafegithub/workflows/domain/actions/LocalAction.kt"><code>LocalAction</code></a> instead:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MyCoolLocalActionV3</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">someArgument</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">LocalAction</span><span class="o">&lt;</span><span class="n">Action</span><span class="p">.</span><span class="na">Outputs</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"./.github/actions/cool-action"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">toYamlArguments</span><span class="p">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">linkedMapOf</span><span class="p">(</span>
<span class="w">            </span><span class="s">"some-argument"</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">someArgument</span><span class="p">,</span>
<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">buildOutputObject</span><span class="p">(</span><span class="n">stepId</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Outputs</span><span class="p">(</span><span class="n">stepId</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="published-docker-actions">Published Docker actions</h4>
<p>In case of a published Docker action, inherit from <a href="https://github.com/typesafegithub/github-workflows-kt/blob/main/github-workflows-kt/src/main/kotlin/io/github/typesafegithub/workflows/domain/actions/DockerAction.kt"><code>DockerAction</code></a> instead:</p>
<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MyCoolDockerActionV3</span><span class="p">(</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">someArgument</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">DockerAction</span><span class="o">&lt;</span><span class="n">Action</span><span class="p">.</span><span class="na">Outputs</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"alpine"</span><span class="p">,</span><span class="w"> </span><span class="s">"latest"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">toYamlArguments</span><span class="p">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">linkedMapOf</span><span class="p">(</span>
<span class="w">            </span><span class="s">"some-argument"</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">someArgument</span><span class="p">,</span>
<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">buildOutputObject</span><span class="p">(</span><span class="n">stepId</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Outputs</span><span class="p">(</span><span class="n">stepId</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="untyped-binding">Untyped binding</h3>
<div class="admonition info">
<p class="admonition-title">When to use this approach</p>
<p>It omits typing entirely, and both inputs and outputs are referenced using strings. Use it if you don't care about
types because you're in the middle of experimenting. It's also more convenient to produce such code by a code
generator.</p>
</div>
<h4 id="repository-based-actions_1">Repository based actions</h4>
<p>In case of a repository based action which most GitHub actions are, use a <a href="https://github.com/typesafegithub/github-workflows-kt/blob/main/github-workflows-kt/src/main/kotlin/io/github/typesafegithub/workflows/actions/CustomAction.kt"><code>CustomAction</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">customAction</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">CustomAction</span><span class="p">(</span>
<span class="w">        </span><span class="n">actionOwner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"xu-cheng"</span><span class="p">,</span>
<span class="w">        </span><span class="n">actionName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"latex-action"</span><span class="p">,</span>
<span class="w">        </span><span class="n">actionVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"v2"</span><span class="p">,</span>
<span class="w">        </span><span class="n">inputs</span><span class="w"> </span><span class="o">=</span>
<span class="w">            </span><span class="n">mapOf</span><span class="p">(</span>
<span class="w">                </span><span class="s">"root_file"</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">"report.tex"</span><span class="p">,</span>
<span class="w">                </span><span class="s">"compiler"</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">"latexmk"</span><span class="p">,</span>
<span class="w">            </span><span class="p">),</span>
<span class="w">    </span><span class="p">)</span>
</code></pre></div>
<p>If your custom action has outputs, you can access them, albeit in a type-unsafe manner:</p>
<div class="highlight"><pre><span></span><code><span class="n">job</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"test_job"</span><span class="p">,</span><span class="w"> </span><span class="n">runsOn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RunnerType</span><span class="p">.</span><span class="na">UbuntuLatest</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">customActionStep</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">uses</span><span class="p">(</span>
<span class="w">            </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Some step with output"</span><span class="p">,</span>
<span class="w">            </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">customAction</span><span class="p">,</span>
<span class="w">        </span><span class="p">)</span>

<span class="w">    </span><span class="c1">// use your outputs:</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">expr</span><span class="p">(</span><span class="n">customActionStep</span><span class="p">.</span><span class="na">outputs</span><span class="o">[</span><span class="s">"custom-output"</span><span class="o">]</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="local-actions_1">Local actions</h4>
<p>In case of a local action you have available in your repository or cloned from a private repository,
use a <a href="https://github.com/typesafegithub/github-workflows-kt/blob/main/github-workflows-kt/src/main/kotlin/io/github/typesafegithub/workflows/actions/CustomLocalAction.kt"><code>CustomLocalAction</code></a> instead:</p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">customAction</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">CustomLocalAction</span><span class="p">(</span>
<span class="w">        </span><span class="n">actionPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"./.github/actions/setup-build-env"</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span>
</code></pre></div>
<h4 id="published-docker-actions_1">Published Docker actions</h4>
<p>In case of a published Docker action, use a <a href="https://github.com/typesafegithub/github-workflows-kt/blob/main/github-workflows-kt/src/main/kotlin/io/github/typesafegithub/workflows/actions/CustomDockerAction.kt"><code>CustomDockerAction</code></a> instead:</p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">customAction</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">CustomDockerAction</span><span class="p">(</span>
<span class="w">        </span><span class="n">actionImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"alpine"</span><span class="p">,</span>
<span class="w">        </span><span class="n">actionTag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"latest"</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span>
</code></pre></div></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>